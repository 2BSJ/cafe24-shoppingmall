<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cart">

	<insert id="insertVo" parameterType='cartvo'>
		<![CDATA[
		INSERT
		INTO cart
		VALUES(null,
			   #{amount},
			   #{nonMemberNo},
			   #{optionNo},
			   #{memberNo}
			   )
		]]>
	</insert>
	
	<select id="getVoByUserNo" parameterType="long" resultType="cartvo">
		<![CDATA[
		SELECT c.no, c.amount, c.non_member_no, c.option_no, c.member_no,
			   o.value, o.price as optionPrice, p.name, p.price
		FROM cart c, option o, product p
		WHERE c.option_no = o.no and o.product_no = p.no and member_no=#{memberNo}
		]]>
	</select>
	
	<delete id="deleteVo" parameterType="java.util.List">
		<foreach collection="list" item="item"  separator=";">
		     <![CDATA[
				DELETE FROM cart  
				WHERE no = #{item.value} 	
		     ]]>
   		</foreach>
	</delete>
	
	<update id="modifyVo" parameterType="java.util.List">
		<foreach collection="list" item="item"  separator=";">
		     <![CDATA[
				UPDATE cart
				SET amount = #{item.amount}
				WHERE no = #{item.no} 
		     ]]>
   		</foreach>
	</update>
	
	
</mapper>